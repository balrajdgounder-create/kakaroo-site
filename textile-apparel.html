<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Kakaroo â€“ Textile & Apparel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #ffffff;
      --text-main: #111111;
      --text-muted: #777777;
      --border: #e5e5e5;
      --accent: #000000;
      --pattern-light: #f5f5f5;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: var(--bg);
      color: var(--text-main);
      line-height: 1.6;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background-image: url("crow.png");
      background-repeat: no-repeat;
      background-position: center;
      background-size: 60vmin;
      opacity: 0.05;
      pointer-events: none;
      z-index: -1;
    }

    body {
      background-color: #ffffff;
    }

    img {
      max-width: 100%;
      display: block;
    }

    a {
      text-decoration: none;
      color: inherit;
    }

    .page {
      max-width: 1120px;
      margin: 0 auto;
      padding: 32px 20px 64px;
    }

    /* HERO */

    .hero {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 80px 40px;
      gap: 40px;
    }

    .hero-left img {
      width: 280px;
      height: auto;
    }

    .hero-left a img {
      transition: opacity .2s ease;
    }

    .hero-left a:hover img {
      opacity: 0.8;
    }

    .hero-right {
      max-width: 600px;
    }

    @media (max-width: 768px) {
      .hero {
        flex-direction: column;
        text-align: center;
      }

      .hero-left img {
        width: 200px;
      }
    }

    .hero-title {
      font-size: clamp(2.4rem, 4vw, 3.2rem);
      font-weight: 700;
      letter-spacing: 0.02em;
    }

    .hero {
      gap: 12px;
    }

    .hero-subtitle {
      max-width: 520px;
      font-size: 0.98rem;
      color: var(--text-muted);
    }

    .hero-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
      margin-top: 8px;
    }

    .btn-primary {
      padding: 10px 22px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: transparent;
      color: #e2a90b;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
    }

    .btn-secondary {
      padding: 10px 22px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: transparent;
      color: #24e20b;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
    }

    /* SECTIONS */

    .section {
      padding: 40px 0;
      border-bottom: none;
    }

    .section:last-of-type {
      border-bottom: none;
    }

    .section-header {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 16px;
    }

    .about-grid {
      display: grid;
      grid-template-columns: minmax(0, 2fr) minmax(0, 1.2fr);
      gap: 32px;
      align-items: center;
    }

    .about-text {
      font-size: 0.98rem;
      color: var(--text-main);
    }

    .about-mark {
      border-radius: 20px;
      border: 1px dashed var(--border);
      padding: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0.6;
    }

    .about-mark-inner {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 32px;
    }

    /* PRODUCTS */

    .products {
      padding: 60px 20px;
      text-align: center;
    }

    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 30px;
      margin-top: 30px;
    }

    .product {
      background: #fff;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      transition: transform 0.2s ease;
    }

    .product:hover {
      transform: translateY(-5px);
    }

    .product img {
      width: 100%;
      border-radius: 10px;
      cursor: pointer;
    }

    .product button {
      margin-top: 10px;
      padding: 10px 18px;
      border: none;
      background: #000;
      color: #fff;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }

    .stock {
      margin-top: 8px;
      font-size: 0.9rem;
      color: #444;
    }

    /* CART */

    .cart {
      padding: 40px 20px;
      border-top: 1px solid var(--border);
      margin-top: 40px;
    }

    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid #eee;
      font-size: 0.95rem;
    }

    .cart-item button {
      padding: 4px 10px;
      font-size: 0.8rem;
      border-radius: 4px;
      border: 1px solid #ccc;
      background: #f5f5f5;
      cursor: pointer;
    }

    .cart-count {
      background: #ff3b3b;
      color: #fff;
      padding: 2px 7px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 600;
      margin-left: 6px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
    }

    #checkout-btn {
      margin-top: 16px;
      padding: 10px 18px;
      border: none;
      background: #000;
      color: #fff;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }

    /* GALLERY */

    .gallery {
      padding: 60px 20px;
      text-align: center;
    }

    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .gallery-item img {
      width: 100%;
      border-radius: 12px;
      cursor: pointer;
      transition: transform .2s ease;
    }

    .gallery-item img:hover {
      transform: scale(1.03);
    }

    /* MODAL */

    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal img {
      max-width: 90%;
      max-height: 90%;
      border-radius: 12px;
    }

    .modal-content {
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  max-width: 400px;
  width: 90%;
  text-align: left;
  position: relative;
  max-height: 90vh;
  overflow-y: auto;
}

.modal-row {
  margin: 14px 0;
  display: flex;
  flex-direction: column;
}

.modal-row select {
  width: 100%;
  padding: 10px;
  border-radius: 6px;
  border: 1px solid #ccc;
  font-size: 1rem;
}

.colour-swatches {
  display: flex;
  gap: 10px;
  margin-top: 6px;
  flex-wrap: wrap;
}

.colour-swatch {
  width: 26px;
  height: 26px;
  border-radius: 50%;
  border: 2px solid #ccc;
  cursor: pointer;
  transition: 0.2s ease;
}


    .modal-close {
      border: none;
      background: transparent;
      font-size: 24px;
      position: absolute;
      top: 10px;
      right: 16px;
      cursor: pointer;
    }


    .colour-swatch:hover {
      transform: scale(1.1);
      border-color: #999;
    }

    .colour-swatch.selected {
      border: 3px solid #000;
      transform: scale(1.15);
    }

    /* PDF */

    .pdf-section {
      padding: 60px 20px;
      text-align: center;
    }

    .pdf-viewer iframe {
      width: 100%;
      height: 600px;
      border: none;
      margin-top: 20px;
    }

    /* CTA */

    .cta {
      text-align: center;
      padding: 40px 20px;
      border-radius: 20px;
      background-color: #fafafa;
      background-image:
        radial-gradient(circle at 0 0, rgba(0, 0, 0, 0.04) 2px, transparent 0),
        radial-gradient(circle at 16px 16px, rgba(0, 0, 0, 0.04) 2px, transparent 0);
      background-size: 32px 32px;
    }

    .cta-title {
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 12px;
    }

    .cta-sub {
      font-size: 0.95rem;
      color: var(--text-muted);
      margin-bottom: 18px;
    }

    .toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: #000;
      color: #fff;
      padding: 12px 22px;
      border-radius: 999px;
      font-size: 14px;
      font-weight: 500;
      opacity: 0;
      pointer-events: none;
      transition: opacity .4s ease, transform .4s ease;
      z-index: 3000;
    }

    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(-6px);
    }

    /* FOOTER */

    footer {
      margin-top: 40px;
      padding-top: 16px;
      border-top: 1px solid var(--border);
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 8px;
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    @media (max-width: 720px) {
      .about-grid {
        grid-template-columns: 1fr;
      }

      .hero {
        min-height: 60vh;
      }
    }

    /* Floating Cart Button â€” Luxury */
    .cart-floating {
      position: fixed;
      top: 24px;
      right: 24px;
      background: #000;
      color: #fff;
      padding: 10px 22px;
      border-radius: 999px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      z-index: 2000;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.18);
      transition: all .25s ease;
      letter-spacing: 0.3px;
    }

    .cart-floating:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 28px rgba(0, 0, 0, 0.22);
      opacity: 0.92;
    }

    /* Cart Panel â€” Luxury */
    .cart-panel {
      position: fixed;
      top: 70px;
      right: 24px;
      width: 320px;
      background: #ffffff;
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.18);
      display: none;
      z-index: 2000;
      animation: cartFade .25s ease;
    }

    @keyframes cartFade {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .cart-panel h3 {
      margin-bottom: 12px;
      font-size: 1.1rem;
      font-weight: 600;
      letter-spacing: .3px;
    }
  </style>
</head>

<body>
  <main class="page">

    <!-- HERO -->
    <section class="hero">
      <div class="hero-left">
        <a href="index.html">
          <img src="images/look2.jpg" alt="Kakaroo logo" class="hero-logo-img" />
        </a>
      </div>

      <div class="hero-right">
        <h1 class="hero-title">Where KAKAROO signs</h1>
        <p class="hero-subtitle">
          Becomes a place for your fitness â€” and your evolution
        </p>

    <div class="hero-actions">
      <a href="textile-apparel.html" button class="btn-primary">Products</button></a>
      <a href="textile-apparel.html" button class="btn-secondary">Career</button></a>
    </div>
      </div>
    </section>

    <!-- TEXTILE & APPAREL INTRO -->
    <section class="section">
      <h1>Textile & Apparel</h1>
      <p>Explore Kakarooâ€™s textile identity, product visuals, and apparel concepts.</p>
    </section>

    <!-- PRODUCTS -->
    <section class="products">
      <h2>Products</h2>
      <div class="product-grid" id="product-grid"></div>
    </section>

    <!-- CART -->
    <div class="cart-floating" onclick="toggleCart()">
      ðŸ›’ Cart <span id="cart-count" class="cart-count">0</span>
    </div>

    <div class="cart-panel" id="cart-panel">
      <h3>Your Cart</h3>
      <div id="cart-items"></div>
      <p id="cart-total"></p>
      <button id="checkout-btn" onclick="checkoutCart()">Checkout (Email)</button>
    </div>

    <!-- GALLERY -->
    <section class="gallery">
      <h2>Gallery</h2>

      <div class="gallery-grid">
        <div class="gallery-item">
          <img src="images/look1.jpg" onclick="showPDFfromGallery('docs/Kakaroo-Polo-Shirts.pdf')" alt="Look 1">
        </div>

        <div class="gallery-item">
          <img src="images/look2.jpg" onclick="showPDFfromGallery('docs/Kakaroo-Polo-Shirts.pdf')" alt="Look 2">
        </div>

        <div class="gallery-item">
          <img src="images/look2.jpg" onclick="showPDFfromGallery('docs/Kakaroo-Polo-Shirts.pdf')" alt="Look 3">
        </div>
      </div>
    </section>

    <!-- PDF VIEWER -->
    <section class="pdf-section">
      <h2>Document Viewer</h2>
      <div id="pdfViewer"></div>
    </section>

    <!-- PRODUCT MODAL -->
    <div id="product-modal" class="modal">
      <div class="modal-content">
        <button class="modal-close" onclick="closeProductModal()">Ã—</button>
       <img id="modal-image" alt="" style="width:100%; max-height:240px; object-fit:cover; border-radius:10px; margin-bottom:12px;">
        <h3 id="modal-name" style="margin-bottom:4px;"></h3>
        <p id="modal-price" style="font-weight:600; margin-bottom:4px;"></p>
        <p id="modal-stock" style="font-size:0.9rem; color:#555; margin-bottom:12px;"></p>

        <div class="modal-row">
          <label for="sizeSelect">Size:</label>
          <select id="sizeSelect"></select>
        </div>

        <div class="modal-row">
          <label>Colour:</label>
          <div id="colourSwatches" class="colour-swatches"></div>
        </div>

        <div class="modal-row">
          <label for="quantitySelect">Quantity:</label>
          <select id="quantitySelect"></select>
        </div>

        <button id="addToCartBtn" class="add-to-cart-btn" style="
          width:100%;
          padding:12px;
          background:#000;
          color:#fff;
          border:none;
          border-radius:8px;
          margin-top:16px;
          cursor:pointer;
          font-size:1rem;
        ">
          Add to Cart
        </button>
      </div>
    </div>

    <!-- FOOTER -->
    <footer>
      <span>Â© Kakaroo</span>
      <span><a href="mailto:balraj.d.gounder@gmail.com">Contact</a></span>

      <button id="admin-reset" style="
  display:none;
  padding:6px 12px;
  font-size:12px;
  border-radius:6px;
  border:1px solid #ccc;
  background:#f8f8f8;
  cursor:pointer;
">
  Reset Stock & Cart
</button>

    </footer>

  </main>

  <script>
    // GALLERY PDF VIEWER
    function showPDFfromGallery(pdfPath) {
      document.getElementById("pdfViewer").innerHTML =
        `<iframe src="${pdfPath}" style="width:100%; height:600px; border:none;"></iframe>`;
      document.querySelector('.pdf-section').scrollIntoView({ behavior: 'smooth' });
    }

    // CART + STOCK STATE
    let cart = JSON.parse(localStorage.getItem("kakarooCart") || "[]");

    function saveCart() {
      localStorage.setItem("kakarooCart", JSON.stringify(cart));
    }

    function saveStock(products) {
      const stockMap = {};
      products.forEach(p => stockMap[p.id] = p.stock);
      localStorage.setItem("kakarooStock", JSON.stringify(stockMap));
    }

    function updateCartCount() {
      const count = cart.reduce((sum, item) => sum + item.qty, 0);
      document.getElementById("cart-count").textContent = count;
    }

    // RENDER PRODUCTS (simple cards, options in modal)
    function renderProducts(products) {
      const grid = document.getElementById("product-grid");
      grid.innerHTML = "";

      products.forEach(product => {
        // compute total stock across colours/sizes
        let totalStock = 0;
        for (const colour in product.stock) {
          for (const size in product.stock[colour]) {
            totalStock += product.stock[colour][size];
          }
        }

        const card = `
          <div class="product">
            <img src="${product.image}" alt="${product.name}" onclick="openProductModal('${product.id}')">
            <h3>${product.name}</h3>
            <p>$${product.price}</p>
            <p class="stock">In Stock: ${totalStock}</p>
            <button onclick="openProductModal('${product.id}')">View Options</button>
          </div>
        `;

        grid.innerHTML += card;
      });
    }

    function toggleCart() {
      const panel = document.getElementById("cart-panel");
      panel.style.display = panel.style.display === "block" ? "none" : "block";
    }

    // RENDER CART
    function renderCart() {
      const container = document.getElementById("cart-items");
      const totalEl = document.getElementById("cart-total");

      if (!container) return;

      if (cart.length === 0) {
        container.innerHTML = "<p>Your cart is empty.</p>";
        totalEl.textContent = "";
        return;
      }

      let total = 0;
      container.innerHTML = cart
        .map((item, index) => {
          const lineTotal = item.price * item.qty;
          total += lineTotal;
          return `
            <div class="cart-item">
              <span>${item.name} (${item.colour}, ${item.size}) x ${item.qty}</span>
              <span>$${lineTotal}</span>
              <button onclick="removeCartItem(${index})">Remove</button>
            </div>
          `;
        })
        .join("");

      totalEl.textContent = `Total: $${total}`;
    }

    // REMOVE FROM CART
    function removeCartItem(index) {
      const item = cart[index];
      if (!item) return;

      const products = window.kakarooProducts;
      const product = products.find(p => p.id === item.id);
      if (product) {
        product.stock[item.colour][item.size] += item.qty;

        // recompute total stock for display
        let totalStock = 0;
        for (const colour in product.stock) {
          for (const size in product.stock[colour]) {
            totalStock += product.stock[colour][size];
          }
        }

        const stockEl = document.querySelector(`#${product.id}-stock`);
        if (stockEl) stockEl.textContent = `In Stock: ${totalStock}`;

        saveStock(products);
      }

      cart.splice(index, 1);
      saveCart();
      renderCart();
      updateCartCount();
    }

    // CHECKOUT VIA EMAIL
    function checkoutCart() {
      if (cart.length === 0) {
        alert("Your cart is empty.");
        return;
      }

      let lines = cart.map(
        item => `${item.name} (Colour: ${item.colour}, Size: ${item.size}) x ${item.qty} - $${item.price * item.qty}`
      );

      const total = cart.reduce((sum, item) => sum + item.price * item.qty, 0);

      const email = "balraj.d.gounder@gmail.com";
      const subject = "New Kakaroo Order";
      const body =
        `Order Details:%0D%0A` +
        lines.join("%0D%0A") +
        `%0D%0A%0D%0ATotal: $${total}%0D%0A%0D%0A` +
        `Name:%0D%0AAddress:%0D%0APhone:%0D%0A`;

      window.location.href = `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${body}`;
    }

    // MODAL LOGIC (colour + size + quantity)
    let selectedColour = null;
    let selectedSize = null;

    function renderColourSwatches(product) {
      const container = document.getElementById("colourSwatches");
      container.innerHTML = "";
      selectedColour = null;

      product.colours.forEach(col => {
        const swatch = document.createElement("div");
        swatch.classList.add("colour-swatch");
        swatch.style.backgroundColor = col.code;
        swatch.dataset.colour = col.name;

        swatch.addEventListener("click", () => {
          document.querySelectorAll(".colour-swatch").forEach(s => s.classList.remove("selected"));
          swatch.classList.add("selected");

          selectedColour = col.name;
          updateSizeOptions(product, selectedColour);
        });

        container.appendChild(swatch);
      });
    }

    function updateSizeOptions(product, colour) {
      const sizeSelect = document.getElementById("sizeSelect");
      sizeSelect.innerHTML = "";
      selectedSize = null;

      product.sizes.forEach(size => {
        const option = document.createElement("option");
        option.value = size;
        option.textContent = size;

        if (product.stock[colour][size] <= 0) {
          option.disabled = true;
        }

        sizeSelect.appendChild(option);
      });

      sizeSelect.onchange = () => {
        selectedSize = sizeSelect.value;
        updateQuantityOptions(product, selectedColour, selectedSize);
      };
    }

    function updateQuantityOptions(product, colour, size) {
      const qtySelect = document.getElementById("quantitySelect");
      qtySelect.innerHTML = "";

      const maxQty = product.stock[colour][size];

      for (let i = 1; i <= maxQty; i++) {
        const option = document.createElement("option");
        option.value = i;
        option.textContent = i;
        qtySelect.appendChild(option);
      }
    }

    function openProductModal(productId) {
      const product = window.kakarooProducts.find(p => p.id === productId);
      if (!product) return;

      document.getElementById("modal-image").src = product.image;
      document.getElementById("modal-name").textContent = product.name;
      document.getElementById("modal-price").textContent = `$${product.price}`;
      document.getElementById("modal-stock").textContent = "Select size & colour";

      document.getElementById("sizeSelect").innerHTML = "";
      document.getElementById("quantitySelect").innerHTML = "";

      renderColourSwatches(product);

      document.getElementById("addToCartBtn").onclick = () => {
        if (!selectedColour) {
          alert("Please select a colour.");
          return;
        }
        if (!selectedSize) {
          alert("Please select a size.");
          return;
        }

        const qty = parseInt(document.getElementById("quantitySelect").value);

        product.stock[selectedColour][selectedSize] -= qty;

        cart.push({
          id: product.id,
          name: product.name,
          price: product.price,
          colour: selectedColour,
          size: selectedSize,
          qty
        });

        saveCart();
        renderCart();
        updateCartCount();
        closeProductModal();
        showToast("Added to cart");
      };

      document.getElementById("product-modal").style.display = "flex";
    }

    function closeProductModal() {
      document.getElementById("product-modal").style.display = "none";
    }

    // INITIAL LOAD: PRODUCTS + PERSISTENT STOCK + CART
    fetch("products.json")
      .then(r => r.json())
      .then(products => {
        const savedStock = JSON.parse(localStorage.getItem("kakarooStock") || "{}");
        products.forEach(p => {
          if (savedStock[p.id] !== undefined) p.stock = savedStock[p.id];
        });
        window.kakarooProducts = products;
        renderProducts(products);
        renderCart();
        updateCartCount();
      });

    function showToast(message = "Added to cart") {
      const toast = document.getElementById("toast");
      toast.textContent = message;
      toast.classList.add("show");

      setTimeout(() => {
        toast.classList.remove("show");
      }, 1800);
    }

    // ADMIN RESET BUTTON (hidden)
document.addEventListener("keydown", (e) => {
  // Show admin button when pressing: CTRL + SHIFT + R
  if (e.ctrlKey && e.shiftKey && e.key === "R") {
    const btn = document.getElementById("admin-reset");
    btn.style.display = "inline-block";
    alert("Admin reset button enabled");
  }
});

// Reset stock + cart
document.getElementById("admin-reset").onclick = () => {
  localStorage.removeItem("kakarooStock");
  localStorage.removeItem("kakarooCart");
  alert("Stock & cart reset. Refreshing...");
  location.reload();
};
  </script>

  <div id="toast" class="toast">Added to cart</div>
</body>

</html>